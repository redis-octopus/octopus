(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cd7cd80"],{5147:function(t,e,n){var r=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(a){}}return!0}},"54b6":function(t,e,n){},"7cdf":function(t,e,n){var r=n("5ca1");r(r.S,"Number",{isInteger:n("9c12")})},"9c12":function(t,e,n){var r=n("d3f4"),a=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&a(t)===t}},c294:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{width:"100%",float:"left","margin-bottom":"20px"}},[n("a-alert",{style:{display:t.reShardingSlots,maxWidth:"400px",float:"left"},attrs:{message:"存在迁移中的 slots",type:"warning",showIcon:""}}),n("a-alert",{style:{display:t.maxmemoryWarning,width:"400px",float:"left"},attrs:{message:"存在节点未配置「最大可用内存」 : maxmemory",type:"warning",showIcon:""}}),n("a-alert",{style:{display:t.usedmemoryWarning,width:"400px",float:"left"},attrs:{message:"存在节点内存使用达 90% +",type:"warning",showIcon:""}})],1),n("div",{staticStyle:{width:"100%",float:"left","margin-bottom":"20px"}},[n("span",{staticClass:"each-chose",staticStyle:{"font-size":"20px","font-weight":"border"}},[t._v("Refresh Every :")]),n("a-button",{staticClass:"each-chose",attrs:{type:t.index[0]},on:{click:function(e){return t.chose(0)}}},[t._v("1 s")]),n("a-button",{staticClass:"each-chose",attrs:{type:t.index[1]},on:{click:function(e){return t.chose(1)}}},[t._v("10 s")]),n("a-button",{staticClass:"each-chose",attrs:{type:t.index[2]},on:{click:function(e){return t.chose(2)}}},[t._v("30 s")]),n("a-button",{staticClass:"each-chose",attrs:{type:t.index[3]},on:{click:function(e){return t.chose(3)}}},[t._v("1 min")]),n("a-button",{staticClass:"each-chose",attrs:{type:t.index[4]},on:{click:function(e){return t.chose(4)}}},[t._v("5 min")]),n("a-button",{staticClass:"each-chose",attrs:{type:t.index[5]},on:{click:function(e){return t.chose(5)}}},[t._v("10 min")])],1),n("a-table",{staticStyle:{float:"left",width:"100%"},attrs:{scroll:{x:1e3},dataSource:t.data}},[n("a-table-column",{key:"address",attrs:{title:"address","data-index":"address"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{key:e,staticStyle:{width:"100px","word-wrap":"break-word"}},[t._v(t._s(e))])]}}])}),n("a-table-column",{key:"version",attrs:{title:"version","data-index":"version"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a-tag",{attrs:{color:e.color}},[t._v(t._s(e.value))])]}}])}),"cluster"===t.type?n("a-table-column",{key:"id",attrs:{title:"id","data-index":"id"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.split(e),function(e){return n("div",{key:e,staticStyle:{width:"100px","word-wrap":"break-word"}},[t._v(t._s(e))])})}}],null,!1,3882921649)}):t._e(),"cluster"===t.type?n("a-table-column",{key:"follow",attrs:{title:"follow","data-index":"follow"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.split(e),function(e){return n("div",{key:e,staticStyle:{width:"100px","word-wrap":"break-word"}},[t._v(t._s(e))])})}}],null,!1,2335156657)}):t._e(),"cluster"===t.type?n("a-table-column",{key:"role",attrs:{title:"角色","data-index":"role"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",t._l(e,function(e){return n("a-tag",{key:e.ROLE,attrs:{color:e.COLOR}},[t._v(t._s(e.ROLE))])}),1)]}}],null,!1,497530285)}):t._e(),"cluster"===t.type?n("a-table-column",{key:"epoth",attrs:{title:"epoth 值","data-index":"epoth"}}):t._e(),"cluster"===t.type?n("a-table-column",{key:"slot",attrs:{title:"拥有 slot（槽点）","data-index":"slot"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e,function(e){return n("a-tag",{key:e,attrs:{color:-1!==e.indexOf("->-")||-1!==e.indexOf("-<-")?"#ff001d":"#042b36"},on:{click:function(n){return t.slotsClick(e)}}},[t._v(t._s(e))])})}}],null,!1,926919105)}):t._e(),"cluster"===t.type?n("a-table-column",{key:"slotPercent",attrs:{title:"slot 拥有比例","data-index":"slotPercent"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("a-progress",{attrs:{type:"circle",percent:parseInt(100*t),width:80}})]}}],null,!1,2944284689)}):t._e(),n("a-table-column",{key:"UsedMemory",attrs:{title:"占用内存","data-index":"UsedMemory"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e)+"M")]}}])}),n("a-table-column",{key:"Maxmemory",attrs:{title:"可用内存","data-index":"Maxmemory"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{style:{color:e.color}},[t._v(t._s(e.value)+"M")])]}}])}),n("a-table-column",{key:"TotalSystemMemory",attrs:{title:"系统总内存","data-index":"TotalSystemMemory"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e)+"M")]}}])}),n("a-table-column",{key:"memoryPercent",attrs:{title:"内存占用比例","data-index":"memoryPercent"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("a-progress",{attrs:{type:"circle",percent:parseInt(100*t),width:80}})]}}])}),n("a-table-column",{key:"state",attrs:{title:"状态","data-index":"state"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",t._l(e,function(e){return n("a-tag",{key:e.STATE,attrs:{color:e.COLOR}},[t._v(t._s(e.STATE?e.STATE:"disconnected"))])}),1)]}}])}),n("a-table-column",{key:"operation",attrs:{title:"操作","data-index":"operation"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a-tag",{attrs:{color:"#0ea7fb"}},[t._v(t._s("节点监控"))])]}}])})],1)],1)},a=[],o=(n("f559"),n("7cdf"),n("28a5"),n("ac4d"),n("8a81"),n("ac6a"),n("c5f6"),n("55dd"),[]),i="cluster",s=1e3,l=null,c=["primary","default","default","default","default","default"],u={name:"setting_redis",data:function(){var t=this;o=[];var e="none",n="none",r="none",a=this;return l=setInterval(function(){t.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:a.$route.query.id})})},s),this.$socket.onmessage=function(e){var n=JSON.parse(e.data);if("/config/redis/detail"===n.Type){o=[];var r=!0,i=!1,s=void 0;try{for(var l,c=function(){var t=l.value;a.type=t.Type,o.push({key:t.ID,id:t.ID,address:t.ADDR,follow:t.FOLLOW,role:[{ROLE:-1!==t.ROLE.indexOf("master")?"master":"slave",COLOR:-1!==t.ROLE.indexOf("master")?"blue":"green"}],epoth:t.EPOTH,slot:t.SLOT.split(" ").filter(function(t){return-1!==t.indexOf("-")&&Number.isInteger(Number(t[0]))?t:""+t===""+Number(t)?t:-1!==t.indexOf("->-")||-1!==t.indexOf("-<-")?(a.reShardingSlots="",t):void 0}),slotPercent:function(){var e=0,n=!0,r=!1,a=void 0;try{for(var o,i=t.SLOT.split(" ")[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;-1!==s.indexOf("-")&&Number.isInteger(Number(s[0]))?e+=Number(s.split("-")[1])-Number(s.split("-")[0]):""+s===""+Number(s)&&e++}}catch(l){r=!0,a=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e/16383}(),memoryPercent:function(){var e=Number(t.UsedMemory)/Number(t.Maxmemory);return 1/0!==e&&e>=.9&&parseInt(100*Math.random())>80&&(a.usedmemoryWarning=""),e}(),state:[{STATE:t.STATE,COLOR:"connected"===t.STATE?"#00c94d":"RED"}],version:function(){return{color:t.VERSION.startsWith("4.")?"#00c94d":"#2593fc",value:t.VERSION}}(),Maxmemory:function(){var e=t.Maxmemory/1024/1024;return 0===e&&parseInt(100*Math.random())>80&&(a.maxmemoryWarning=""),{value:e.toFixed(2),color:e<1?"red":""}}(),UsedMemory:(t.UsedMemory/1024/1024).toFixed(2),TotalSystemMemory:(t.TotalSystemMemory/1024/1024).toFixed(2),operation:[]})},u=n.Data[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)c()}catch(d){i=!0,s=d}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}o=o.sort(function(t,e){return Number(t.epoth)-Number(e.epoth)}).sort(function(t,e){return t.role[0].ROLE>e.role[0].ROLE?1:-1}),t.data=o}},{data:o,index:c,type:i,maxmemoryWarning:e,usedmemoryWarning:n,reShardingSlots:r}},methods:{slotsClick:function(t){console.log(t)},chose:function(t){var e=this,n=this;switch(c=["default","default","default","default","default","default"],c[t]="primary",this.index=c,t){case 0:s=1e3,this.interTime=s,window.clearInterval(l),l=setInterval(function(){e.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:n.$route.query.id})})},s);break;case 1:s=1e4,this.interTime=s,window.clearInterval(l),l=setInterval(function(){e.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:n.$route.query.id})})},s);break;case 2:s=3e4,this.interTime=s,window.clearInterval(l),l=setInterval(function(){e.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:n.$route.query.id})})},s);break;case 3:s=6e4,this.interTime=s,window.clearInterval(l),l=setInterval(function(){e.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:n.$route.query.id})})},s);break;case 4:s=3e5,this.interTime=s,window.clearInterval(l),l=setInterval(function(){e.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:n.$route.query.id})})},s);break;case 5:s=6e5,this.interTime=s,window.clearInterval(l),l=setInterval(function(){e.$socket.sendObj({Func:"/config/redis/detail",Data:JSON.stringify({id:n.$route.query.id})})},s);break}},split:function(t){if("string"!==typeof t)return[];var e=[t];return e}},beforeDestroy:function(){null!==l&&window.clearInterval(l)}},d=u,f=(n("ce3d"),n("2877")),y=Object(f["a"])(d,r,a,!1,null,"d9daf2ce",null);e["default"]=y.exports},ce3d:function(t,e,n){"use strict";var r=n("54b6"),a=n.n(r);a.a},d2c8:function(t,e,n){var r=n("aae3"),a=n("be13");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(t))}},f559:function(t,e,n){"use strict";var r=n("5ca1"),a=n("9def"),o=n("d2c8"),i="startsWith",s=""[i];r(r.P+r.F*n("5147")(i),"String",{startsWith:function(t){var e=o(this,t,i),n=a(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})}}]);